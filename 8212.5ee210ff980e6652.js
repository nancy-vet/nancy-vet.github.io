"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8212],{8212:(R,_,p)=>{p.r(_),p.d(_,{DosePageModule:()=>I});var u=p(5150),P=p(177),C=p(4341),M=p(9858),t=p(3953),F=p(8627),$=p(8104);let E=(()=>{var n;class s{constructor(){this.template="item",this.onSelectCard=new t.bkB,this.$uiProperty={title:"",activeSubstance:"",drugDose:"0",activeSubstanceDose:"0",patientDose:"0",applicationMethod:"",medicationConcentration:"0",medicationConcentrationDecorator:"ml",activeSubstanceDecorator:"",convertedActiveSubstanceDecorator:"",patientDoseDecorator:"",drugDoseDecorator:""}}ngOnInit(){const e=this.calculateDose(this.inputPatientModel,this.object);this.imagePath=this.buildAssetPath(),this.$uiProperty.title=this.object.title,this.$uiProperty.activeSubstance=this.object.activeSubstance,this.$uiProperty.drugDose=String(Math.round(100*parseFloat(e.drugDose))/100),this.$uiProperty.patientDose=e.patientDose,this.$uiProperty.applicationMethod=e.applicationMethod,this.$uiProperty.patientDoseDecorator=e.patientDoseDecorator,this.$uiProperty.drugDoseDecorator=e.drugDoseDecorator,this.$uiProperty.medicationConcentrationDecorator=e.drugConcentrationDecorator,this.$uiProperty.activeSubstanceDose=e.activeSubstanceDose,console.log(`this.$uiProperty.patientDose: ${this.$uiProperty.patientDose}`);const i=this.inputPatientModel.patientType;console.log(`this.$formProperty.patientType From drug-card2: ${i}`);const r=this.object.application[i];let d;r?d=i:(console.warn(`No application properties found for animal type '${i}'. Falling back to 'any'.`),d="any");const c=this.object.application[d];if(console.log(`applicationObject: ${r}`),console.log(`applicationType: ${d}`),!c)throw new Error(`Application properties not defined for animal type '${i}'`);this.$uiProperty.convertedActiveSubstanceDecorator=this.decoratorConvertor(c.activeSubstanceDoseDecorator)}processCard(){this.onSelectCard.emit(this.object)}buildAssetPath(){var e,i,r,o,l,d,c,g,v,b,f,D,y;return"respiratory"==(null===(e=this.object)||void 0===e?void 0:e.type)?"/assets/icon/respiratory.png":"gastrointestinal"==(null===(i=this.object)||void 0===i?void 0:i.type)?"/assets/icon/gastrointestinal.png":"cardiovascular"==(null===(r=this.object)||void 0===r?void 0:r.type)?"/assets/icon/cardiovascular.png":"urogenital"==(null===(o=this.object)||void 0===o?void 0:o.type)?"/assets/icon/urogenital.png":"nervous"==(null===(l=this.object)||void 0===l?void 0:l.type)?"/assets/icon/nervous.png":"eyes"==(null===(d=this.object)||void 0===d?void 0:d.type)?"/assets/icon/eyes.png":"ears"==(null===(c=this.object)||void 0===c?void 0:c.type)?"/assets/icon/ears.png":"skin"==(null===(g=this.object)||void 0===g?void 0:g.type)?"/assets/icon/skin.png":"antibiotics"==(null===(v=this.object)||void 0===v?void 0:v.type)?"/assets/icon/antibiotics.png":"antiparasitic"==(null===(b=this.object)||void 0===b?void 0:b.type)?"/assets/icon/antiparasitic.png":"endocrine"==(null===(f=this.object)||void 0===f?void 0:f.type)?"/assets/icon/chemotherapeutics.png":"antiinflammatory"==(null===(D=this.object)||void 0===D?void 0:D.type)?"/assets/icon/antiinflammatory.png":"others"==(null===(y=this.object)||void 0===y?void 0:y.type)?"/assets/icon/others.png":""}calculateDose(e,i){const r=e.patientWeightNumber,o=i.drugConcentration,l=i.drugConcentrationDecorator,d=this.getPatientKey(this.inputPatientModel.patientType,this.object.application),c=this.object.application[d],g=c.activeSubstanceDose,b=c.applicationMethod;let m,h,f=[],D=[];this.decoratorConvertor(c.activeSubstanceDoseDecorator),"mg_ml"===l||"ml_mg"===l?(m="mg",h="ml"):"\xb5g_ml"===l?(m="\xb5g",h="ml"):"ml"===l?(m="ml",h="ml"):"mg_tabl"===l?(m="mg",h="tabl"):"mg_caps"===l&&(m="mg",h="caps"),console.log(`activeSubstanceDose: ${g}`);for(const k of c.activeSubstanceDose)f.push(r*k),D.push(r*k/o);return{activeSubstanceDose:g.join(" - "),patientDoseDecorator:m,drugDoseDecorator:h,applicationMethod:b,patientDose:f.join(" - "),drugDose:D.join(" - "),drugConcentrationDecorator:i.drugConcentrationDecorator}}getPatientKey(e,i){return Object.keys(i).includes("any")?"any":e}decoratorConvertor(e){return"mg_ml"==e?"mg/ml":"mg_tabl"==e?"mg/tabl":"\xb5g_tabl"==e?"\xb5g/tabl":"mg_caps"==e?"mg/caps":"\xb5g_ml"==e?"\xb5g/ml":"g"==e?"g":"mg_kg"==e?"mg/kg":"\xb5g_kg"==e?"\xb5g/kg":"MU_kg"==e?"MU/kg":"ml"==e?"ml":"ml_kg"==e?"ml/kg":"ml_5_kg"==e?"ml/5 kg":"ml_10_kg"==e?"ml/10 kg":"tabl"==e?"tabl":"tabl_5_kg"==e?"tabl/5 kg":"tabl_2.5_kg"==e?"tabl/2.5 kg":"tabl_10_kg"==e?"tabl/10 kg":"caps"==e?"caps":"caps_5_kg"==e?"caps/5 kg":"implant"==e?"implant":"gtt"==e?"gtt":"gtt_2_kg"==e?"gtt/2 kg":"cm"==e?"cm":"sprays"==e?"sprays":"\u043c\u0430\u043b\u043a\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"==e?"\u043c\u0430\u043b\u043a\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e":"\u043d\u044f\u043a\u043e\u043b\u043a\u043e \u043a\u0430\u043f\u043a\u0438"==e?"\u043d\u044f\u043a\u043e\u043b\u043a\u043e \u043a\u0430\u043f\u043a\u0438":"ampula"==e?"\u0430\u043c\u043f\u0443\u043b\u0430":"paketche"==e?"\u043f\u0430\u043a\u0435\u0442\u0447\u0435":""}}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["dc-card2"]],inputs:{template:"template",object:"object",inputPatientModel:"inputPatientModel"},outputs:{onSelectCard:"onSelectCard"},standalone:!0,features:[t.aNF],decls:37,vars:18,consts:[[1,"mt16","card",3,"click"],[1,"ml8"],[1,"card-title"],[2,"font-size","12px"],[1,"ml8",2,"display","flex","margin-left","auto","justify-content","flex-end","flex-direction","column"],[1,"ml8","mt16",2,"display","flex","margin-right","16px"],[2,"padding","5px","width","160px"],[2,"padding","5px","margin-right","16px"],["src","./assets/imgs/arrow.png"],[2,"width","20%","margin-left","auto","padding","5px 5px","background","#4b8ffa","color","#fff","text-align","center","align-content","center"],[2,"width","20%","margin-left","auto","padding","5px 5px","background","#d60b52","color","#fff","text-align","center","align-content","center"],[1,"ml8","mt16",2,"display","flex","margin-right","16px","border-top","solid #dedede 2px"],[2,"padding","5px","margin-top","6px","font-size","14px"],[1,"ml8","mt16",2,"border-top","solid #dedede 2px"],[2,"padding","5px","margin-top","6px","font-size","12px"],[2,"padding","5px","font-size","12px","font-weight","600"],[2,"padding","5px","font-size","12px"]],template:function(e,i){1&e&&(t.j41(0,"div",0),t.bIt("click",function(){return i.processCard()}),t.j41(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.EFF(5),t.k0s()(),t.j41(6,"div",4)(7,"div",5)(8,"div")(9,"div",6),t.EFF(10," \u0414\u043e\u0437\u0430 \u043d\u0430 \u0416\u0412: "),t.k0s()(),t.j41(11,"div",7),t.nrm(12,"img",8),t.k0s(),t.j41(13,"div",9),t.EFF(14),t.k0s()(),t.j41(15,"div",5)(16,"div")(17,"div",6),t.EFF(18," \u041d\u0443\u0436\u043d\u043e \u043a\u043e\u043b-\u0432\u043e: "),t.k0s()(),t.j41(19,"div",7),t.nrm(20,"img",8),t.k0s(),t.j41(21,"div",10),t.EFF(22),t.k0s()(),t.j41(23,"div",11)(24,"div",12),t.EFF(25),t.k0s()(),t.j41(26,"div",13)(27,"div",14),t.EFF(28," \u041f\u0440\u0435\u0441\u043c\u044f\u0442\u0430 \u0441\u0435 \u043f\u043e \u0444\u043e\u0440\u043c\u0443\u043b\u0430: "),t.k0s(),t.j41(29,"div",15),t.EFF(30," (\u0442\u0435\u0433\u043b\u043e \u043d\u0430 \u0436\u0438\u0432\u043e\u0442\u043d\u043e\u0442\u043e) * (\u0434\u043e\u0437\u0430 \u043d\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430\u0442\u0430 \u0441\u0443\u0431\u0441\u0442\u0430\u043d\u0446\u0438\u044f) / (\u043a\u043e\u043d\u0446-\u044f \u043d\u0430 \u043c\u0435\u0434\u0438\u043a\u0430\u043c\u0435\u043d\u0442\u0430), "),t.k0s(),t.j41(31,"div",16),t.EFF(32),t.k0s(),t.j41(33,"div",16),t.EFF(34),t.k0s(),t.j41(35,"div",16),t.EFF(36),t.k0s()()()()),2&e&&(t.R7$(3),t.SpI(" ",i.$uiProperty.title," "),t.R7$(2),t.E5c(" ",i.$uiProperty.activeSubstance,", \u0434\u043e\u0437\u0430: ",i.$uiProperty.activeSubstanceDose," ",i.$uiProperty.convertedActiveSubstanceDecorator," "),t.R7$(9),t.Lme(" ",i.$uiProperty.patientDose," ",i.$uiProperty.patientDoseDecorator," "),t.R7$(8),t.Lme(" ",i.$uiProperty.drugDose," ",i.$uiProperty.drugDoseDecorator," "),t.R7$(3),t.SpI(" \u041a\u0430\u043a \u0441\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u044f: ",i.$uiProperty.applicationMethod," "),t.R7$(7),t.LHq(" \u0442. \u0435. (\u0442\u0435\u0433\u043b\u043e \u043d\u0430 \u0436\u0438\u0432\u043e\u0442\u043d\u043e\u0442\u043e) * (\u0434\u043e\u0437\u0430 \u043d\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430\u0442\u0430 \u0441\u0443\u0431\u0441\u0442\u0430\u043d\u0446\u0438\u044f) = ",i.inputPatientModel.patientWeightNumber," * ",i.$uiProperty.activeSubstanceDose," = ",i.$uiProperty.patientDose," ",i.$uiProperty.patientDoseDecorator," = \u0434\u043e\u0437\u0430 \u043d\u0430 \u0436\u0438\u0432\u043e\u0442\u043d\u043e\u0442\u043e "),t.R7$(2),t.SpI(" \u043a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0430\u0446\u0438\u044f\u0442\u0430 \u043d\u0430 \u043c\u0435\u0434\u0438\u043a\u0430\u043c\u0435\u043d\u0442\u0430 \u0435 ",i.object.drugConcentration,". "),t.R7$(2),t.LHq(" (\u0434\u043e\u0437\u0430 \u043d\u0430 \u0436\u0438\u0432\u043e\u0442\u043d\u043e\u0442\u043e) / (\u043a\u043e\u043d\u0446-\u044f \u043d\u0430 \u043c\u0435\u0434\u0438\u043a\u0430\u043c\u0435\u043d\u0442\u0430) = ",i.$uiProperty.patientDose," / ",i.object.drugConcentration," = ",i.$uiProperty.drugDose," ",i.$uiProperty.drugDoseDecorator," "))},styles:[".card[_ngcontent-%COMP%]{cursor:pointer;background:#249ea057;padding:8px;border-radius:6px}.card-logo[_ngcontent-%COMP%]{display:inline-block;width:48px;height:48px;background:#dedede;border-radius:28px;text-align:center}.card-title[_ngcontent-%COMP%]{font-weight:700;color:#000000d6}"]}),s})();var j=p(3662);function S(n,s){if(1&n){const a=t.RV6();t.j41(0,"div")(1,"dc-card",17),t.bIt("onSelectCard",function(i){t.eBV(a);const r=t.XpG();return t.Njj(r.processSelectedCard(i))}),t.k0s()()}if(2&n){const a=s.$implicit;t.R7$(),t.Y8G("inputTitle",null==a?null:a.title)("object",a)}}function x(n,s){if(1&n&&(t.j41(0,"div"),t.nrm(1,"dc-card2",19),t.k0s()),2&n){const a=s.$implicit,e=t.XpG(2);t.R7$(),t.Y8G("inputPatientModel",e.$formProperty)("template","card")("object",a)}}function T(n,s){if(1&n&&(t.j41(0,"div")(1,"div",18),t.EFF(2,"# \u041f\u0440\u0435\u0434\u043f\u0438\u0441\u0430\u043d\u0438"),t.k0s(),t.nrm(3,"div"),t.DNE(4,x,2,3,"div",15),t.k0s()),2&n){const a=t.XpG();t.R7$(4),t.Y8G("ngForOf",a.cardCollection)}}let O=(()=>{var n;class s{constructor(){this.inputSuggestionCollection=[],this.cardCollection=[],this.$componentState={isPatientCreated:!1},this.$uiProperty={title:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043f\u0430\u0446\u0438\u0435\u043d\u0442"},this.$formProperty={patientName:"",patientWeight:0,patientWeightUnit:"kilogram",patientWeightNumber:0,patientType:"",activeMedicine:""},this.dataService=(0,t.WQX)(F.u),this.ttt=(0,t.WQX)(u._t)}onInput(e){this.inputSuggestionCollection=this.dataService.getById(null==e?void 0:e.detail.value)}processSelectPatientType(e){this.$formProperty.patientType=e,console.log(`this.$formProperty.patientType From dose.page.ts: ${this.$formProperty.patientType}`)}takePatientWeightUnit(){this.$formProperty.patientWeightNumber=this.$formProperty.patientWeight,"kilogram"==this.$formProperty.patientWeightUnit||(this.$formProperty.patientWeightNumber/=1e3)}processAddPatient(e){this.$componentState.isPatientCreated=!0}isMedicinePickerVisible(){return 1==this.$componentState.isPatientCreated}processSelectedCard(e){this.takePatientWeightUnit(),this.inputSuggestionCollection=[],this.$formProperty.activeMedicine="",this.cardCollection.push(e)}processOpenMenu(){console.log("start menu item"),this.ttt.close("first-menu"),this.ttt.open("first-menu")}}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["page-calculator-dose"]],decls:37,vars:8,consts:[[3,"translucent"],["slot","start"],["id","main-content",3,"fullscreen"],["size","9",2,"margin-left","auto","margin-right","auto"],[2,"display","flex","align-items","center","justify-content","center","max-width","100%","padding","10px",3,"onSelected"],["size","4",1,"bold",2,"place-content","center","padding","10px"],["size","3"],["type","number","min","0","placeholder","0",2,"place-content","center","text-align","center","border-bottom","1.3px solid #249ea0",3,"ngModelChange","counter","ngModel"],["value","kilogram","fill","solid",2,"border-bottom","1.3px solid #249ea0",3,"ngModelChange","ionChange","ngModel"],["value","kilogram"],["value","gram"],["for","weight-input"],["size","8"],["placeholder","\u0412\u044a\u0432\u0435\u0434\u0438 \u043c\u0435\u0434\u0438\u043a\u0430\u043c\u0435\u043d\u0442",3,"ngModelChange","ionInput","ngModel"],["size","12"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"onSelectCard","inputTitle","object"],[2,"font-weight","bold","font-size","18px","margin-top","16px"],[3,"inputPatientModel","template","object"]],template:function(e,i){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5," \u041f\u0440\u0435\u0441\u043c\u044f\u0442\u0430\u043d\u0435 \u043d\u0430 \u0434\u043e\u0437\u0438 \u043d\u0430 \u043b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430 "),t.k0s()()(),t.j41(6,"ion-content")(7,"ion-content",2)(8,"ion-grid")(9,"ion-row")(10,"ion-col",3)(11,"dc-patient-picker",4),t.bIt("onSelected",function(o){return i.processSelectPatientType(o)}),t.k0s()()()(),t.j41(12,"ion-grid")(13,"ion-row")(14,"ion-col",5)(15,"ion-label"),t.EFF(16,"\u0422\u0435\u0433\u043b\u043e "),t.k0s()(),t.j41(17,"ion-col",6)(18,"ion-input",7),t.mxI("ngModelChange",function(o){return t.DH7(i.$formProperty.patientWeight,o)||(i.$formProperty.patientWeight=o),o}),t.k0s()(),t.j41(19,"ion-col")(20,"ion-select",8),t.mxI("ngModelChange",function(o){return t.DH7(i.$formProperty.patientWeightUnit,o)||(i.$formProperty.patientWeightUnit=o),o}),t.bIt("ionChange",function(){return i.takePatientWeightUnit()}),t.EFF(21,"\u043c\u0435\u0440\u043d\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0430 "),t.j41(22,"ion-select-option",9),t.EFF(23,"\u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043ca"),t.k0s(),t.j41(24,"ion-select-option",10),t.EFF(25,"\u0433\u0440\u0430\u043ca"),t.k0s()()()(),t.j41(26,"ion-row")(27,"ion-col",5)(28,"ion-label",11),t.EFF(29,"\u041c\u0435\u0434\u0438\u043a\u0430\u043c\u0435\u043d\u0442 "),t.k0s()(),t.j41(30,"ion-col",12)(31,"ion-input",13),t.mxI("ngModelChange",function(o){return t.DH7(i.$formProperty.activeMedicine,o)||(i.$formProperty.activeMedicine=o),o}),t.bIt("ionInput",function(o){return i.onInput(o)}),t.k0s()()()(),t.j41(32,"ion-grid")(33,"ion-row")(34,"ion-col",14),t.DNE(35,S,2,2,"div",15)(36,T,5,1,"div",16),t.k0s()()()()()),2&e&&(t.Y8G("translucent",!0),t.R7$(7),t.Y8G("fullscreen",!0),t.R7$(11),t.Y8G("counter",!0),t.R50("ngModel",i.$formProperty.patientWeight),t.R7$(2),t.R50("ngModel",i.$formProperty.patientWeightUnit),t.R7$(11),t.R50("ngModel",i.$formProperty.activeMedicine),t.R7$(4),t.Y8G("ngForOf",i.inputSuggestionCollection),t.R7$(),t.Y8G("ngIf",i.cardCollection.length>0))},dependencies:[u.QW,u.hU,u.W9,u.lO,u.eU,u.$w,u.he,u.MC,u.ln,u.Nm,u.Ip,u.BC,u.ai,u.su,u.Je,u.Gw,u.T6,P.Sq,P.bT,C.BC,C.vS,$.e,E,j.T],styles:[".card-logo[_ngcontent-%COMP%]{background:#dedede;border-radius:45px;padding:3px;width:47px;height:47px;text-align:center}.category-circle[_ngcontent-%COMP%]{display:inline-block;width:56px;height:56px;background:#dedede;border-radius:38px;text-align:center;margin:8px}ion-input.custom[_ngcontent-%COMP%]{--background: #dedede;--color: #d60b52;--placeholder-color: #ddd;--placeholder-opacity: .8;--padding-bottom: 10px;--padding-end: 10px;--padding-start: 10px;--padding-top: 10px;margin-top:14px;text-align:center}ion-input.custom[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%], ion-input.custom[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{color:var(--ion-color-step-700, #373737)}#calculated-dose[_ngcontent-%COMP%]{padding:10px}.div-drug-calculated[_ngcontent-%COMP%]{cursor:pointer;background:#249ea057;padding:8px;border-radius:6px}#div-active-substance[_ngcontent-%COMP%], #div-active-substance-dose[_ngcontent-%COMP%]{font-size:.8rem}#div-calculated-doses[_ngcontent-%COMP%]{display:flex;margin-left:auto;justify-content:flex-end;gap:10px}#div-drug-needed-as[_ngcontent-%COMP%]{background:#4b8ffa;color:#fff;padding:5px}#div-drug-needed-med[_ngcontent-%COMP%]{background:#d60b52;color:#fff;padding:5px}#div-drug-appl[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:5px 0}"]}),s})();var W=p(7451);const A=[{path:"",component:O}];let I=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[M.iI.forChild(A),u.bv,P.MD,C.YN,$.e,W.M,j.T]}),s})()}}]);