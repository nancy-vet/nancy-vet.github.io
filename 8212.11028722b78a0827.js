"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8212],{8212:(W,P,c)=>{c.r(P),c.d(P,{DosePageModule:()=>w});var n=c(5150),D=c(177),f=c(4341),C=c(9858),t=c(3953),_=c(8627),j=c(8104);let $=(()=>{var o;class u{constructor(){this.template="item",this.onSelectCard=new t.bkB,this.$uiProperty={title:"",activeSubstance:"",drugDose:"0",activeSubstanceDose:"0",patientDose:"0",applicationMethod:""}}ngOnInit(){const e=this.calculateDose(this.inputPatientModel,this.object);this.imagePath=this.buildAssetPath(),this.$uiProperty.title=this.object.title,this.$uiProperty.activeSubstance=this.object.activeSubstance,this.$uiProperty.drugDose=parseFloat(e.drugDose).toFixed(3),this.$uiProperty.activeSubstanceDose=parseFloat(e.activeSubstanceDose).toFixed(3),this.$uiProperty.patientDose=parseFloat(e.patientDose).toFixed(3),this.$uiProperty.applicationMethod=e.applicationMethod}processCard(){this.onSelectCard.emit(this.object)}buildAssetPath(){var e,i,r,s,l,h,m,p,d,g,b,v,y;return"respiratory"==(null===(e=this.object)||void 0===e?void 0:e.type)?"/assets/icon/respiratory.png":"gastrointestinal"==(null===(i=this.object)||void 0===i?void 0:i.type)?"/assets/icon/gastrointestinal.png":"cardiovascular"==(null===(r=this.object)||void 0===r?void 0:r.type)?"/assets/icon/cardiovascular.png":"urogenital"==(null===(s=this.object)||void 0===s?void 0:s.type)?"/assets/icon/urogenital.png":"nervous"==(null===(l=this.object)||void 0===l?void 0:l.type)?"/assets/icon/nervous.png":"eyes"==(null===(h=this.object)||void 0===h?void 0:h.type)?"/assets/icon/eyes.png":"ears"==(null===(m=this.object)||void 0===m?void 0:m.type)?"/assets/icon/ears.png":"skin"==(null===(p=this.object)||void 0===p?void 0:p.type)?"/assets/icon/skin.png":"antibiotics"==(null===(d=this.object)||void 0===d?void 0:d.type)?"/assets/icon/antibiotics.png":"antiparasitic"==(null===(g=this.object)||void 0===g?void 0:g.type)?"/assets/icon/antiparasitic.png":"endocrine"==(null===(b=this.object)||void 0===b?void 0:b.type)?"/assets/icon/chemotherapeutics.png":"antiinflammatory"==(null===(v=this.object)||void 0===v?void 0:v.type)?"/assets/icon/antiinflammatory.png":"others"==(null===(y=this.object)||void 0===y?void 0:y.type)?"/assets/icon/others.png":""}calculateDose(e,i){const r=e.patientWeight,s=i.drugConcentration,l=this.getApplicatyonMethodBasedOnType(),h=l.activeSubstanceDose,m=l.applicationMethod;let p=[],d=[];for(const g of l.activeSubstanceDose)p.push(r*g),d.push(r*g/s);return{activeSubstanceDose:h,applicationMethod:m,patientDose:p.join(" - "),drugDose:d.join(" - ")}}getApplicatyonMethodBasedOnType(){const e=this.inputPatientModel.patientType;if(!e)throw new Error("Something whent compleatly wrong");return this.object.application[this.object.application[e]||"any"]}}return(o=u).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["dc-card2"]],inputs:{template:"template",object:"object",inputPatientModel:"inputPatientModel"},outputs:{onSelectCard:"onSelectCard"},standalone:!0,features:[t.aNF],decls:24,vars:5,consts:[[1,"mt16","card",3,"click"],[1,"ml8"],[1,"card-title"],[2,"font-size","12px"],[1,"ml8",2,"display","flex","margin-left","auto","justify-content","flex-end","flex-direction","column"],[1,"ml8","mt16",2,"display","flex","margin-right","16px"],[2,"padding","5px","width","160px"],[2,"padding","5px","margin-right","16px"],["src","./assets/imgs/arrow.png"],[2,"background","#4b8ffa","color","#fff","padding","5px 5px"],[2,"background","#d60b52","color","#fff","padding","5px 5px"],[1,"ml8","mt16",2,"display","flex","margin-right","16px","border-top","solid #dedede 2px"],[2,"padding","5px","margin-top","6px"]],template:function(e,i){1&e&&(t.j41(0,"div",0),t.bIt("click",function(){return i.processCard()}),t.j41(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.EFF(5),t.k0s()(),t.j41(6,"div",4)(7,"div",5)(8,"div",6),t.EFF(9," \u041f\u0430\u0446\u0438\u0435\u043d\u0442 \u0434\u043e\u0437\u0430 "),t.k0s(),t.j41(10,"div",7),t.nrm(11,"img",8),t.k0s(),t.j41(12,"div",9),t.EFF(13),t.k0s()(),t.j41(14,"div",5)(15,"div",6),t.EFF(16," \u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u043e \u0434\u043e\u0437\u0430 "),t.k0s(),t.j41(17,"div",7),t.nrm(18,"img",8),t.k0s(),t.j41(19,"div",10),t.EFF(20),t.k0s()(),t.j41(21,"div",11)(22,"div",12),t.EFF(23),t.k0s()()()()),2&e&&(t.R7$(3),t.SpI(" ",i.$uiProperty.title," "),t.R7$(2),t.SpI(" ",i.$uiProperty.activeSubstance," "),t.R7$(8),t.SpI(" ",i.$uiProperty.patientDose," mg "),t.R7$(7),t.SpI(" ",i.$uiProperty.drugDose," ml "),t.R7$(3),t.SpI(" ",i.$uiProperty.applicationMethod," "))},styles:[".card[_ngcontent-%COMP%]{cursor:pointer;background:#f8e8ee;padding:8px;border-radius:6px}.card-logo[_ngcontent-%COMP%]{display:inline-block;width:48px;height:48px;background:#dedede;border-radius:28px;text-align:center}.card-title[_ngcontent-%COMP%]{font-weight:700;color:#35a8d8cc}"]}),u})();function F(o,u){if(1&o){const a=t.RV6();t.j41(0,"ion-item")(1,"ion-label",16),t.bIt("click",function(){const i=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.processDrugSelection(i))}),t.EFF(2),t.k0s()()}if(2&o){const a=u.$implicit;t.R7$(2),t.JRh(null==a?null:a.title)}}function k(o,u){}function M(o,u){if(1&o&&t.nrm(0,"dc-card2",18),2&o){const a=u.$implicit,e=t.XpG(2);t.Y8G("inputPatientModel",e.$formProperty)("template","card")("object",a)}}function x(o,u){if(1&o&&(t.j41(0,"div")(1,"div",17),t.EFF(2,"# \u041f\u0440\u0435\u0434\u043f\u0438\u0441\u0430\u043d\u0438"),t.k0s(),t.nrm(3,"div"),t.Z7z(4,M,1,3,"dc-card2",18,t.fX1),t.k0s()),2&o){const a=t.XpG();t.R7$(4),t.Dyx(a.cardCollection)}}let S=(()=>{var o;class u{constructor(){this.dropdownContent="",this.drugCollectionResult=[],this.ttt=(0,t.WQX)(n._t),this.dataService=(0,t.WQX)(_.u),this.inputSuggestionCollection=[],this.cardCollection=[],this.selectedDrug=null,this.$componentState={isPatientCreated:!1},this.$uiProperty={title:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043f\u0430\u0446\u0438\u0435\u043d\u0442"},this.$formProperty={searchDrug:"",patientName:"",patientWeight:0,patientWeightNumber:0,patientWeightUnit:"kilogram",patientType:"",activeMedicine:""}}processSelectPatientType(e){this.$formProperty.patientType=e}takePatientWeightUnit(){this.$formProperty.patientWeightNumber=this.$formProperty.patientWeight,"kilogram"==this.$formProperty.patientWeightUnit||(this.$formProperty.patientWeightNumber/=1e3)}processDrugSelection(e){this.selectedDrug=e}processCalculationDosage(){console.log(this.selectedDrug.drugConcentration)}onInput(e){this.inputSuggestionCollection=this.dataService.getById(null==e?void 0:e.detail.value,!0)}processAddPatient(e){this.$componentState.isPatientCreated=!0}isMedicinePickerVisible(){return 1==this.$componentState.isPatientCreated}processSelectedCard(e){this.inputSuggestionCollection=[],this.$formProperty.activeMedicine="",this.cardCollection.push(e)}processOpenMenu(){this.ttt.close("first-menu"),this.ttt.open("first-menu")}}return(o=u).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["page-calculator-dose"]],decls:51,vars:8,consts:[[3,"translucent"],["slot","start"],["id","main-content",3,"fullscreen"],["size","9",2,"margin-left","auto","margin-right","auto"],[2,"display","flex","align-items","center","justify-content","center","max-width","100%","padding","10px",3,"onSelected"],["type","number","min","0","placeholder","0",3,"ngModelChange","counter","ngModel"],["value","kilogram","fill","solid",3,"ngModelChange","ionChange","ngModel"],["value","kilogram"],["value","gram"],["size","4"],["for","weight-input"],[3,"ionInput"],[4,"ngFor","ngForOf"],["size","8"],["size","default","expand","block",2,"font-size","1rem","font-weight","700","border-radius","3px",3,"click","disabled"],["size","12"],[3,"click"],[2,"font-weight","bold","font-size","18px","margin-top","16px"],[3,"inputPatientModel","template","object"]],template:function(e,i){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.nrm(3,"ion-menu-button"),t.k0s(),t.j41(4,"ion-title"),t.EFF(5," \u041f\u0440\u0435\u0441\u043c\u044f\u0442\u0430\u043d\u0435 \u043d\u0430 \u0434\u043e\u0437\u0438 \u043d\u0430 \u043b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430 "),t.k0s()()(),t.j41(6,"ion-content",2)(7,"ion-grid")(8,"ion-row")(9,"ion-col",3)(10,"dc-patient-picker",4),t.bIt("onSelected",function(s){return i.processSelectPatientType(s)}),t.k0s()()()(),t.j41(11,"ion-grid")(12,"ion-row")(13,"ion-col")(14,"ion-label"),t.EFF(15,"\u0422\u0435\u0433\u043b\u043e "),t.k0s()(),t.j41(16,"ion-col")(17,"ion-input",5),t.mxI("ngModelChange",function(s){return t.DH7(i.$formProperty.patientWeight,s)||(i.$formProperty.patientWeight=s),s}),t.k0s()(),t.j41(18,"ion-col")(19,"ion-select",6),t.mxI("ngModelChange",function(s){return t.DH7(i.$formProperty.patientWeightUnit,s)||(i.$formProperty.patientWeightUnit=s),s}),t.bIt("ionChange",function(){return i.takePatientWeightUnit()}),t.EFF(20,"\u043c\u0435\u0440\u043d\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0430 "),t.j41(21,"ion-select-option",7),t.EFF(22,"\u043a\u0438\u043b\u043e\u0433\u0440\u0430\u043ca"),t.k0s(),t.j41(23,"ion-select-option",8),t.EFF(24,"\u0433\u0440\u0430\u043ca"),t.k0s()()()(),t.j41(25,"ion-row")(26,"ion-col",9)(27,"ion-label",10),t.EFF(28,"\u041c\u0435\u0434\u0438\u043a\u0430\u043c\u0435\u043d\u0442 "),t.k0s()(),t.j41(29,"ion-col")(30,"ion-searchbar",11),t.bIt("ionInput",function(s){return i.onInput(s)}),t.k0s()()(),t.j41(31,"div")(32,"ion-list"),t.DNE(33,F,3,1,"ion-item",12),t.k0s()(),t.nrm(34,"ion-row"),t.j41(35,"ion-row"),t.nrm(36,"ion-col",9),t.j41(37,"ion-col",13)(38,"ion-button",14),t.bIt("click",function(){return i.processCalculationDosage()}),t.EFF(39," \u0418\u0437\u0447\u0438\u0441\u043b\u0438 "),t.k0s()()()(),t.j41(40,"ion-grid")(41,"ion-row")(42,"ion-col",15),t.EFF(43," # \u0418\u0437\u0447\u0438\u0441\u043b\u0435\u043d\u0438 \u043c\u0435\u0434\u0438\u043a\u0430\u043c\u0435\u043d\u0442\u0438: "),t.k0s()(),t.nrm(44,"ion-row"),t.k0s(),t.j41(45,"ion-grid")(46,"ion-row")(47,"ion-col",15),t.Z7z(48,k,0,0,null,null,t.fX1),t.DNE(50,x,6,0,"div"),t.k0s()()()()),2&e&&(t.Y8G("translucent",!0),t.R7$(6),t.Y8G("fullscreen",!0),t.R7$(11),t.Y8G("counter",!0),t.R50("ngModel",i.$formProperty.patientWeight),t.R7$(2),t.R50("ngModel",i.$formProperty.patientWeightUnit),t.R7$(14),t.Y8G("ngForOf",i.inputSuggestionCollection),t.R7$(5),t.Y8G("disabled",0===i.$formProperty.patientWeight),t.R7$(10),t.Dyx(i.inputSuggestionCollection),t.R7$(2),t.vxM(i.cardCollection.length>0?50:-1))},dependencies:[n.Jm,n.QW,n.hU,n.W9,n.lO,n.eU,n.$w,n.uz,n.he,n.nf,n.MC,n.ln,n.S1,n.Nm,n.Ip,n.BC,n.ai,n.su,n.Je,n.Gw,n.T6,D.Sq,f.BC,f.vS,j.e,$],styles:[".card-logo[_ngcontent-%COMP%]{background:#dedede;border-radius:45px;padding:3px;width:47px;height:47px;text-align:center}.category-circle[_ngcontent-%COMP%]{display:inline-block;width:56px;height:56px;background:#dedede;border-radius:38px;text-align:center;margin:8px}ion-input.custom[_ngcontent-%COMP%]{--background: #dedede;--color: #d60b52;--placeholder-color: #ddd;--placeholder-opacity: .8;--padding-bottom: 10px;--padding-end: 10px;--padding-start: 10px;--padding-top: 10px;margin-top:14px;text-align:center}ion-input.custom[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%], ion-input.custom[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{color:var(--ion-color-step-700, #373737)}"]}),u})();var E=c(7451);const T=[{path:"",component:S}];let w=(()=>{var o;class u{}return(o=u).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[C.iI.forChild(T),n.bv,D.MD,f.YN,j.e,E.M]}),u})()}}]);